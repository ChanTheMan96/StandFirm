<div class="container">
  <div class="page-content">
    <section class="rg-intro">
      <h1>Relationship Guide</h1>
    </section>

    <div *ngIf="loading" class="loading">
      <nz-spin nzSimple></nz-spin>
      <p>Loading Bible...</p>
    </div>

    <div *ngIf="!loading">
      <section class="control-card">
        <div class="text-size-control">
          <div class="control-head"><span class="label">Reading Comfort</span><span class="size-chip">{{ verseTextSize }}px</span></div>
          <nz-slider
            [nzMin]="14"
            [nzMax]="24"
            [nzStep]="1"
            [(ngModel)]="verseTextSize"
            (ngModelChange)="onVerseTextSizeChange($event)"
          ></nz-slider>
        </div>
      </section>

      <section class="rg-card">
        <section class="rg-section" *ngFor="let entry of entries; let i = index">
          <h2>{{ entry.title }}</h2>
          <div class="verse-header-row">
            <span class="rg-ref">{{ entry.ref }}</span>
            <span *ngIf="passages[i]?.translation_name || passages[i]?.translation_id" class="verse-version-tag">
              {{ passages[i]?.translation_name || passages[i]?.translation_id }}
            </span>
          </div>

          <div *ngIf="passages[i]?.verses?.length" [style.--sidebar-text-size.px]="verseTextSize">
            <div *ngFor="let v of passages[i]?.verses">
              <p class="verse-text">{{ v.text }}</p>
            </div>
          </div>
          <div *ngIf="passages[i] && !passages[i]?.verses?.length" [style.--sidebar-text-size.px]="verseTextSize">
            <p class="verse-text">{{ passages[i]?.text || "Verse text not available." }}</p>
          </div>
          <p class="takeaway" [style.--sidebar-text-size.px]="verseTextSize"><strong>Takeaway:</strong> {{ entry.takeaway }}</p>
        </section>
      </section>
    </div>
  </div>
</div>
